<!doctype html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <title>ZoomIn</title>
	<script src="https://accounts.google.com/gsi/client" async defer></script>    
    <link rel="icon" type="image/png" href="assets/img/favicon.png" sizes="32x32">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/img/favicon.png">
    <link rel="stylesheet" href="assets/css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

    
    <div id="appCapsule" class=" col-sm-4 m-auto" style="padding:56px 0 0 0 ;">
		<div id="g_id_onload"
           data-client_id="1017261403719-8oaf6n4e8fthp04bmfjbd5l692o8109c.apps.googleusercontent.com"
           data-context="signin"
           data-ux_mode="popup"
           data-callback="handleCredentialResponse"
           data-auto_prompt="false">
      </div>
        <div class="section mt-2 text-center">
            <h1>Sign Up</h1>
            <div class="divider mt-2 card-title text-center">
                <span></span><span class="" style="position: relative;"><div style="position: absolute;left: 0px;top: -3px;opacity: 0;" class="g_id_signin" data-type="icon" data-shape="circle" data-theme="outline" data-text="signin" data-size="large"></div><div  style="position: absolute;right: 3px;top: -12px;width: 40px;overflow: hidden;height: 40px;opacity:0"><fb:login-button scope="public_profile,email" onlogin="checkLoginState();"></fb:login-button></div><img src="assets/img/google.png" onclick="Logingp()" width="30" style="margin-right:10px;border-radius: 100%;"><img src="assets/img/fb.png" width="30" onclick="Loginfb()" style="margin-right:10px;border-radius: 100%;"></span><span></span>
            </div>
        </div>
        <div class="section mb-0 p-2" id="register">
            <span>
                <div class="card">
                    <div class="card-body">
                        <input type="hidden" name="user_id" class="user_id">
                        <div class="form-group basic position-relative">
                            <div class="input-wrapper">
                                <label class="label" for="name">Name</label>
                                <input type="name" class="form-control" name="fullname" id="name" placeholder="Your Name" data-required="yes" data-validation-required-message="This field is required">
                                <i class="clear-input">
                                    <ion-icon name="close-circle"></ion-icon>
                                </i>
                            </div>
                        </div>
                        <div class="form-group basic position-relative">
                            <div class="input-wrapper">
                                <label class="label" for="dob">Date of Birth</label>
                                <input type="text" class="form-control date-picker" autocomplete="off" id="dob" name="dob" placeholder="Your Date of Birth" data-required="yes" data-validation-required-message="This field is required">
                                <i class="clear-input">
                                    <ion-icon name="close-circle"></ion-icon>
                                </i>
                            </div>
                        </div>
                        <div class="form-group basic position-relative">
                            <div class="input-wrapper">
                                <label class="label" for="email">E-mail</label>
                                <input type="email" class="form-control" id="email" name="email" placeholder="Your E-mail" data-required="yes" data-validation-required-message="This field is required" data-form="#register" data-unique-fun="check_email_exist" data-request="2" data-pattern="^[a-zA-Z0-9.!#$%&amp;'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$" data-validation-message="Not valid email">
                                <i class="clear-input">
                                    <ion-icon name="close-circle"></ion-icon>
                                </i>
                            </div>
                        </div>
                        <div class="form-group basic position-relative">
                            <div class="input-wrapper">
                                <label class="label" for="username">Username</label>
                                <input type="text" class="form-control" id="username" name="username" autocomplete="off" placeholder="Your Username" data-required="yes" data-validation-required-message="This field is required" data-form="#register" data-unique-fun="check_username_exist" data-request="1">
                                <i class="clear-input">
                                    <ion-icon name="close-circle"></ion-icon>
                                </i>
                            </div>
                        </div>
                        <div class="form-group basic position-relative">
                            <div class="input-wrapper">
                                <label class="label" for="password">Password</label>
                                <input type="password" class="form-control" id="password" name="password" autocomplete="off" placeholder="Your password" data-required="yes" data-validation-required-message="This field is required">
                                <i class="clear-input">
                                    <ion-icon name="close-circle"></ion-icon>
                                </i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-2 transparent">
                    <button type="submit" class="btn btn-app-gradient easy game_btn btn-block btn-lg" onclick="validate('#register','register')">
                        <span class="spinner-border spinner-border-lg d-none" role="status" aria-hidden="true"></span> 
                        <span class="text">Register</span>
                    </button>
                </div>
            </span>
        </div>

    </div>
    <script src="assets/js/lib/jquery-3.4.1.min.js"></script>
    <script src="assets/js/lib/popper.min.js"></script>
    <script src="assets/js/lib/bootstrap.bundle.min.js"></script>
    <script src="assets/js/moment.min.js"></script>
    <script src="assets/js/bootstrap-datetimepicker.min.js"></script>
    <script src="assets/js/plugins/owl-carousel/owl.carousel.min.js"></script>
    <script src="assets/js/base.js"></script>
  	<script src="https://unpkg.com/jwt-decode/build/jwt-decode.js"></script>
	<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v15.0&appId=1153499242175725&autoLogAppEvents=1" nonce="2V6gMiut"></script>



</body>
</html>
<script>
let searchParams = new URLSearchParams(window.location.search)
user_id = searchParams.get('user_id')
$('#register input[name=user_id]').val(user_id)
$('.date-picker').datetimepicker({format: 'DD-MM-YYYY',maxDate: moment().add(-13, 'year')})
.on('dp.change', function(e){
    $(this).blur()
    $(this).parent().siblings('.input-danger').remove();
    $(this).parent().parent().removeClass('text-danger');
})
if(user_id!='' && user_id!=null)
{
    get_user_details(user_id,'#register')
}
function Loginfb()
{
	if(detectandroid()==true)
	{
		Android.facebookLogin();
	}
	else if(detectios()==true)
	{
		window.location='facebooklogin:';
	}
    else
    {

    }
}
function Logingp()
{
	if(detectandroid()==true)
	{
		Android.gmailLogin();
	}
	else if(detectios()==true)
	{
		window.location='gmaillogin:';
	}
} 
  
 function handleCredentialResponse(response) {
    const responsePayload = jwt_decode(response.credential);
	var name = responsePayload.name;
   	var image =responsePayload.picture;
   	var email = responsePayload.email;
   	signupsocial(email,name,image);
  }

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "https://connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));

function statusChangeCallback(response) {  // Called with the results from FB.getLoginStatus().
    console.log(response);  
  	
    if (response.status === 'connected') {   // Logged into your webpage and Facebook.
      testAPI();  
    } else {                                 // Not logged into your webpage or we are unable to tell.
      
    }
  }


  function checkLoginState() {               // Called when a person is finished with the Login Button.
    FB.getLoginStatus(function(response) {   // See the onlogin handler
      statusChangeCallback(response);
    });
  }


  window.fbAsyncInit = function() {
    FB.init({
      appId      : '1153499242175725',
      cookie     : true,
      xfbml      : true,
      version    : 'v15.0'
    });


    FB.getLoginStatus(function(response) {   // Called after the JS SDK has been initialized.
      statusChangeCallback(response);        // Returns the login status.
    });
  };
 
  function testAPI() {                      // Testing Graph API after login.  See statusChangeCallback() for when this call is made.
    FB.api('/me?fields=name,email,picture.width(150).height(150)', function(response) {
  		var name = response.name;
  	  	if(response.picture.data!='undefined')
  	  	{
      		var image =response.picture.data.url;
  	  	}
  		else
  		{
  			var image ='';
  		}
      	var email = response.email;
      	signupsocial(email,name,image);
    });
  	FB.logout(function(response) {
   // Person is now logged out
	});
  }
</script>